<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>Backteroids!</title>
	<script type="text/javascript" src="phaser.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script type="text/javascript" src="playLevel.js"></script>
	<script type="text/javascript" src="levelComplete.js"></script>
	<script type="text/javascript" src="splashScreen.js"></script>
	<script type="text/javascript" src="levelSelect.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>

<script type="text/javascript">

	var gameWidth = 800;
	var gameHeight = 600;

	var game = new Phaser.Game(gameWidth, gameHeight, Phaser.AUTO);
	game.state.add("PlayLevel",playLevel);
	game.state.add("LevelComplete",levelComplete);
	game.state.add("SplashScreen",splashScreen);
	game.state.add("LevelSelect",levelSelect);
	game.state.start("SplashScreen");

	var playerData = {};
	playerData.levelScores = {};
	playerData.totalScore = 0;
	playerData.level = 1;
	
	var calculateTotalScore = function() {
		var totalScore = 0;
		$.each(playerData.levelScores,function(index,levelScore){
			totalScore = totalScore + levelScore.bestScore;
		});
		playerData.totalScore = totalScore;
	};

	var displayTotalScore = function() {
		calculateTotalScore();
		var graphics = game.add.graphics(0, 0);
		graphics.lineStyle(2, 0x888888, 1);
		graphics.beginFill(0x444444, 1);
    	graphics.drawRect(0,0,gameWidth,26);

		var scoreTextStyle = {font: "bold 16px Arial", fill: "#ffff00"};
		var scoreText = game.add.text(20,5,"Total Score: "+playerData.totalScore,scoreTextStyle);
		scoreText.anchor.x = 0;
		scoreText.anchor.y = 0;
	};

	var calculatePlayerLevel = function(gameData) {
		levels = gameData.levelThresholds;
		var tempLevel = 1;
		for (var i =1; i<levels.length-1; i++)
		{
			tempLevel = tempLevel + Math.max(0,Math.min(1,(playerData.totalScore-levels[i-1]) / (levels[i]-levels[i-1])));
		}
		playerData.level = Math.floor(tempLevel);
		return tempLevel;
	}

	var displayPlayerLevel = function() {
		var playerLevelTextStyle = {font: "bold 16px Arial", fill: "#ffff00"};
		var playerLevelText = game.add.text(550,5,"Lv. "+playerData.level,playerLevelTextStyle);
		playerLevelText.anchor.x = 1;
		playerLevelText.anchor.y = 0;

		pctFull = calculatePlayerLevel(gameData) - playerData.level;

		var graphics = game.add.graphics(0, 0);
		graphics.lineStyle(1, 0xCCCCCCC, 1);
		graphics.beginFill(0x000000, 1);
    	graphics.drawRect(560,5,230,16);

    	graphics.lineStyle(0, 0x000000, 1);
    	graphics.beginFill(0x00CC00,1);
    	graphics.drawRect(561,6,228*pctFull,15);

	}

</script>


</head>
<body>

<h1> Backteroids </h1>



<p> By Ryan Schulz </p>

</body>
</html>